<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Example uses | oepsData Package Documentation</title>
  <meta name="description" content="This is a short bookdown explaining how to access OEPS data through R and showing off a few potential uses." />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Example uses | oepsData Package Documentation" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a short bookdown explaining how to access OEPS data through R and showing off a few potential uses." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Example uses | oepsData Package Documentation" />
  
  <meta name="twitter:description" content="This is a short bookdown explaining how to access OEPS data through R and showing off a few potential uses." />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="basic-usage.html"/>
<link rel="next" href="getting-oeps-data-from-bigquery.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>2</b> Getting started</a></li>
<li class="chapter" data-level="3" data-path="basic-usage.html"><a href="basic-usage.html"><i class="fa fa-check"></i><b>3</b> Basic Usage</a>
<ul>
<li class="chapter" data-level="3.1" data-path="basic-usage.html"><a href="basic-usage.html#cacheing"><i class="fa fa-check"></i><b>3.1</b> Cacheing</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="example-uses.html"><a href="example-uses.html"><i class="fa fa-check"></i><b>4</b> Example uses</a>
<ul>
<li class="chapter" data-level="4.1" data-path="example-uses.html"><a href="example-uses.html#data-subsetting"><i class="fa fa-check"></i><b>4.1</b> Data subsetting</a></li>
<li class="chapter" data-level="4.2" data-path="example-uses.html"><a href="example-uses.html#longitudinal-analysis"><i class="fa fa-check"></i><b>4.2</b> Longitudinal analysis</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="getting-oeps-data-from-bigquery.html"><a href="getting-oeps-data-from-bigquery.html"><i class="fa fa-check"></i><b>5</b> Getting OEPS Data from BigQuery</a>
<ul>
<li class="chapter" data-level="5.1" data-path="getting-oeps-data-from-bigquery.html"><a href="getting-oeps-data-from-bigquery.html#setting-up-bigquery"><i class="fa fa-check"></i><b>5.1</b> Setting up BigQuery</a></li>
<li class="chapter" data-level="5.2" data-path="getting-oeps-data-from-bigquery.html"><a href="getting-oeps-data-from-bigquery.html#query"><i class="fa fa-check"></i><b>5.2</b> Making Queries</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="getting-oeps-data-from-bigquery.html"><a href="getting-oeps-data-from-bigquery.html#low-level"><i class="fa fa-check"></i><b>5.2.1</b> The low-level API</a></li>
<li class="chapter" data-level="5.2.2" data-path="getting-oeps-data-from-bigquery.html"><a href="getting-oeps-data-from-bigquery.html#dplyr"><i class="fa fa-check"></i><b>5.2.2</b> The dplyr API</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">oepsData Package Documentation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="example-uses" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Example uses<a href="example-uses.html#example-uses" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="data-subsetting" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Data subsetting<a href="example-uses.html#data-subsetting" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>load_data</code> offers a few tools to help subset data on first load. To get a better sense of how these tools can be put towards practical use, let’s walk through a quick and dirty spatial investigation of poverty and working age population in Chicago.</p>
<p>We start by loading the data dictionary to see what data is available and into what themes they are categorized. This lets us request a subset of the full data set, which minimizes the amount of data in our environment at a time.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="example-uses.html#cb17-1" tabindex="-1"></a><span class="co"># See what data is available</span></span>
<span id="cb17-2"><a href="example-uses.html#cb17-2" tabindex="-1"></a>data_dictionary <span class="ot">&lt;-</span> <span class="fu">load_oeps_dictionary</span>(<span class="at">scale=</span><span class="st">&#39;tract&#39;</span>)</span>
<span id="cb17-3"><a href="example-uses.html#cb17-3" tabindex="-1"></a></span>
<span id="cb17-4"><a href="example-uses.html#cb17-4" tabindex="-1"></a><span class="co"># if working in RStudio, we recommend:</span></span>
<span id="cb17-5"><a href="example-uses.html#cb17-5" tabindex="-1"></a><span class="co"># View(data_dictionary)</span></span>
<span id="cb17-6"><a href="example-uses.html#cb17-6" tabindex="-1"></a></span>
<span id="cb17-7"><a href="example-uses.html#cb17-7" tabindex="-1"></a><span class="fu">head</span>(data_dictionary)</span>
<span id="cb17-8"><a href="example-uses.html#cb17-8" tabindex="-1"></a><span class="co">#&gt;         Theme 1980 1990 2000 2010 Latest Longitudinal Variable</span></span>
<span id="cb17-9"><a href="example-uses.html#cb17-9" tabindex="-1"></a><span class="co">#&gt; 432 Geography    x    x    x    x      x            x HEROP_ID</span></span>
<span id="cb17-10"><a href="example-uses.html#cb17-10" tabindex="-1"></a><span class="co">#&gt; 433 Geography    x    x    x    x      x            x    GEOID</span></span>
<span id="cb17-11"><a href="example-uses.html#cb17-11" tabindex="-1"></a><span class="co">#&gt; 434 Geography    x    x    x    x      x            x  TRACTCE</span></span>
<span id="cb17-12"><a href="example-uses.html#cb17-12" tabindex="-1"></a><span class="co">#&gt; 435 Geography &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;      x            x      ZIP</span></span>
<span id="cb17-13"><a href="example-uses.html#cb17-13" tabindex="-1"></a><span class="co">#&gt; 436 Geography    x    x    x    x      x            x COUNTYFP</span></span>
<span id="cb17-14"><a href="example-uses.html#cb17-14" tabindex="-1"></a><span class="co">#&gt; 437 Geography    x    x    x    x      x            x  STATEFP</span></span>
<span id="cb17-15"><a href="example-uses.html#cb17-15" tabindex="-1"></a><span class="co">#&gt;                                                                                     Description</span></span>
<span id="cb17-16"><a href="example-uses.html#cb17-16" tabindex="-1"></a><span class="co">#&gt; 432                          A derived unique id corresponding to the relevant geographic unit.</span></span>
<span id="cb17-17"><a href="example-uses.html#cb17-17" tabindex="-1"></a><span class="co">#&gt; 433 Eleven digit unique geographic identifier consisting of the STATEFP, COUNTYFP, and TRACTCE.</span></span>
<span id="cb17-18"><a href="example-uses.html#cb17-18" tabindex="-1"></a><span class="co">#&gt; 434                                            Six digit geographic key that identifies tracts.</span></span>
<span id="cb17-19"><a href="example-uses.html#cb17-19" tabindex="-1"></a><span class="co">#&gt; 435                                                                       Predominant zip code.</span></span>
<span id="cb17-20"><a href="example-uses.html#cb17-20" tabindex="-1"></a><span class="co">#&gt; 436                   Three digit geographic key that identifies counties within a given state.</span></span>
<span id="cb17-21"><a href="example-uses.html#cb17-21" tabindex="-1"></a><span class="co">#&gt; 437                   Two digit geographic key that uniquely identifies states and territories.</span></span>
<span id="cb17-22"><a href="example-uses.html#cb17-22" tabindex="-1"></a><span class="co">#&gt;     Metadata Location                               Source</span></span>
<span id="cb17-23"><a href="example-uses.html#cb17-23" tabindex="-1"></a><span class="co">#&gt; 432              &lt;NA&gt; Healthy Regions &amp; Policies Lab, UIUC</span></span>
<span id="cb17-24"><a href="example-uses.html#cb17-24" tabindex="-1"></a><span class="co">#&gt; 433              &lt;NA&gt;     Tiger/Line 2018; Tiger/Line 2010</span></span>
<span id="cb17-25"><a href="example-uses.html#cb17-25" tabindex="-1"></a><span class="co">#&gt; 434              &lt;NA&gt;     Tiger/Line 2018; Tiger/Line 2010</span></span>
<span id="cb17-26"><a href="example-uses.html#cb17-26" tabindex="-1"></a><span class="co">#&gt; 435              &lt;NA&gt;                           HUD&#39;s PD&amp;R</span></span>
<span id="cb17-27"><a href="example-uses.html#cb17-27" tabindex="-1"></a><span class="co">#&gt; 436              &lt;NA&gt;     Tiger/Line 2018; Tiger/Line 2010</span></span>
<span id="cb17-28"><a href="example-uses.html#cb17-28" tabindex="-1"></a><span class="co">#&gt; 437              &lt;NA&gt;     Tiger/Line 2018; Tiger/Line 2010</span></span>
<span id="cb17-29"><a href="example-uses.html#cb17-29" tabindex="-1"></a><span class="co">#&gt;                                                                     Source Long</span></span>
<span id="cb17-30"><a href="example-uses.html#cb17-30" tabindex="-1"></a><span class="co">#&gt; 432                                                                        &lt;NA&gt;</span></span>
<span id="cb17-31"><a href="example-uses.html#cb17-31" tabindex="-1"></a><span class="co">#&gt; 433                      Tiger/Line 2018 Shapefiles; Tiger/Line 2010 Shapefiles</span></span>
<span id="cb17-32"><a href="example-uses.html#cb17-32" tabindex="-1"></a><span class="co">#&gt; 434                      Tiger/Line 2018 Shapefiles; Tiger/Line 2010 Shapefiles</span></span>
<span id="cb17-33"><a href="example-uses.html#cb17-33" tabindex="-1"></a><span class="co">#&gt; 435 Housing and Urban Development Office of Policy and Development and Research</span></span>
<span id="cb17-34"><a href="example-uses.html#cb17-34" tabindex="-1"></a><span class="co">#&gt; 436                      Tiger/Line 2018 Shapefiles; Tiger/Line 2010 Shapefiles</span></span>
<span id="cb17-35"><a href="example-uses.html#cb17-35" tabindex="-1"></a><span class="co">#&gt; 437                      Tiger/Line 2018 Shapefiles; Tiger/Line 2010 Shapefiles</span></span>
<span id="cb17-36"><a href="example-uses.html#cb17-36" tabindex="-1"></a><span class="co">#&gt;     OEPSv1   Type               Example</span></span>
<span id="cb17-37"><a href="example-uses.html#cb17-37" tabindex="-1"></a><span class="co">#&gt; 432   &lt;NA&gt; String 140US01001020100-2018</span></span>
<span id="cb17-38"><a href="example-uses.html#cb17-38" tabindex="-1"></a><span class="co">#&gt; 433   &lt;NA&gt; String           01003010705</span></span>
<span id="cb17-39"><a href="example-uses.html#cb17-39" tabindex="-1"></a><span class="co">#&gt; 434   &lt;NA&gt; String                010705</span></span>
<span id="cb17-40"><a href="example-uses.html#cb17-40" tabindex="-1"></a><span class="co">#&gt; 435   &lt;NA&gt; String                 36526</span></span>
<span id="cb17-41"><a href="example-uses.html#cb17-41" tabindex="-1"></a><span class="co">#&gt; 436   &lt;NA&gt; String                   003</span></span>
<span id="cb17-42"><a href="example-uses.html#cb17-42" tabindex="-1"></a><span class="co">#&gt; 437   &lt;NA&gt; String                    01</span></span>
<span id="cb17-43"><a href="example-uses.html#cb17-43" tabindex="-1"></a><span class="co">#&gt;                                                                                        Data Limitations</span></span>
<span id="cb17-44"><a href="example-uses.html#cb17-44" tabindex="-1"></a><span class="co">#&gt; 432                                                                                                &lt;NA&gt;</span></span>
<span id="cb17-45"><a href="example-uses.html#cb17-45" tabindex="-1"></a><span class="co">#&gt; 433                                                                                                &lt;NA&gt;</span></span>
<span id="cb17-46"><a href="example-uses.html#cb17-46" tabindex="-1"></a><span class="co">#&gt; 434                                                                                                &lt;NA&gt;</span></span>
<span id="cb17-47"><a href="example-uses.html#cb17-47" tabindex="-1"></a><span class="co">#&gt; 435 Census tracts align poorly with zips, so merging in zip data in this way will likely be very lossy.</span></span>
<span id="cb17-48"><a href="example-uses.html#cb17-48" tabindex="-1"></a><span class="co">#&gt; 436                                                                                                &lt;NA&gt;</span></span>
<span id="cb17-49"><a href="example-uses.html#cb17-49" tabindex="-1"></a><span class="co">#&gt; 437                                                                                                &lt;NA&gt;</span></span>
<span id="cb17-50"><a href="example-uses.html#cb17-50" tabindex="-1"></a><span class="co">#&gt;                                                                                                                                                                                                   Comments</span></span>
<span id="cb17-51"><a href="example-uses.html#cb17-51" tabindex="-1"></a><span class="co">#&gt; 432 The HEROP_ID is generated as follows: Summary Level Code + &quot;US&quot; + GEOID + “-” + Year. In the case of Census Tract geographies, Summary Level Code is 140 and GEOID is State FP + County FP + Tract CE.</span></span>
<span id="cb17-52"><a href="example-uses.html#cb17-52" tabindex="-1"></a><span class="co">#&gt; 433                                                                                                                                                                                                   &lt;NA&gt;</span></span>
<span id="cb17-53"><a href="example-uses.html#cb17-53" tabindex="-1"></a><span class="co">#&gt; 434                                                                                                                                                                                                   &lt;NA&gt;</span></span>
<span id="cb17-54"><a href="example-uses.html#cb17-54" tabindex="-1"></a><span class="co">#&gt; 435                                                                                                                                                                                                   &lt;NA&gt;</span></span>
<span id="cb17-55"><a href="example-uses.html#cb17-55" tabindex="-1"></a><span class="co">#&gt; 436                                                                                                                                                                                                   &lt;NA&gt;</span></span>
<span id="cb17-56"><a href="example-uses.html#cb17-56" tabindex="-1"></a><span class="co">#&gt; 437                                                                                                                                                                                                   &lt;NA&gt;</span></span>
<span id="cb17-57"><a href="example-uses.html#cb17-57" tabindex="-1"></a><span class="co">#&gt;     Analysis</span></span>
<span id="cb17-58"><a href="example-uses.html#cb17-58" tabindex="-1"></a><span class="co">#&gt; 432     &lt;NA&gt;</span></span>
<span id="cb17-59"><a href="example-uses.html#cb17-59" tabindex="-1"></a><span class="co">#&gt; 433     &lt;NA&gt;</span></span>
<span id="cb17-60"><a href="example-uses.html#cb17-60" tabindex="-1"></a><span class="co">#&gt; 434     &lt;NA&gt;</span></span>
<span id="cb17-61"><a href="example-uses.html#cb17-61" tabindex="-1"></a><span class="co">#&gt; 435     &lt;NA&gt;</span></span>
<span id="cb17-62"><a href="example-uses.html#cb17-62" tabindex="-1"></a><span class="co">#&gt; 436     &lt;NA&gt;</span></span>
<span id="cb17-63"><a href="example-uses.html#cb17-63" tabindex="-1"></a><span class="co">#&gt; 437     &lt;NA&gt;</span></span></code></pre></div>
<p>Based on the data dictionary, we can see that we have two variables of interest – <code>Age18_64</code> and <code>PovP</code>. Both variables are available at multiple time periods, and they belong to different themes – social and economic, respectively.</p>
<p>Let’s pull our data using <code>load_oeps</code>. Note how many parameters we provide information for. Geographically, we provide the <a href="https://transition.fcc.gov/oet/info/maps/census/fips/fips.txt">FIPS code</a> for our desired <code>states</code> (just Illinois) and <code>counties</code> (just Cook), which dramatically cuts down the number of entries retrieved. Additionally, we provide our variables of interests’ themes, lowering the number of rows retrieved.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="example-uses.html#cb18-1" tabindex="-1"></a><span class="co"># Grab the data</span></span>
<span id="cb18-2"><a href="example-uses.html#cb18-2" tabindex="-1"></a>cook_county_2010 <span class="ot">&lt;-</span> <span class="fu">load_oeps</span>(</span>
<span id="cb18-3"><a href="example-uses.html#cb18-3" tabindex="-1"></a>  <span class="at">scale=</span><span class="st">&#39;tract&#39;</span>, </span>
<span id="cb18-4"><a href="example-uses.html#cb18-4" tabindex="-1"></a>  <span class="at">year=</span><span class="st">&#39;2010&#39;</span>, </span>
<span id="cb18-5"><a href="example-uses.html#cb18-5" tabindex="-1"></a>  <span class="at">themes=</span><span class="fu">c</span>(<span class="st">&#39;social&#39;</span>, <span class="st">&#39;economic&#39;</span>), </span>
<span id="cb18-6"><a href="example-uses.html#cb18-6" tabindex="-1"></a>  <span class="at">states=</span><span class="st">&#39;17&#39;</span>, </span>
<span id="cb18-7"><a href="example-uses.html#cb18-7" tabindex="-1"></a>  <span class="at">counties=</span><span class="st">&#39;031&#39;</span>,</span>
<span id="cb18-8"><a href="example-uses.html#cb18-8" tabindex="-1"></a>  <span class="at">geometry=</span>T)</span>
<span id="cb18-9"><a href="example-uses.html#cb18-9" tabindex="-1"></a><span class="co">#&gt; Warning: Some columns are type &#39;integer64&#39; but package bit64 is not installed.</span></span>
<span id="cb18-10"><a href="example-uses.html#cb18-10" tabindex="-1"></a><span class="co">#&gt; Those columns will print as strange looking floating point data. There is no</span></span>
<span id="cb18-11"><a href="example-uses.html#cb18-11" tabindex="-1"></a><span class="co">#&gt; need to reload the data. Simply install.packages(&#39;bit64&#39;) to obtain the</span></span>
<span id="cb18-12"><a href="example-uses.html#cb18-12" tabindex="-1"></a><span class="co">#&gt; integer64 print method and print the data again.</span></span>
<span id="cb18-13"><a href="example-uses.html#cb18-13" tabindex="-1"></a></span>
<span id="cb18-14"><a href="example-uses.html#cb18-14" tabindex="-1"></a><span class="co"># Preview what we got</span></span>
<span id="cb18-15"><a href="example-uses.html#cb18-15" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">data.frame</span>(cook_county_2010))</span>
<span id="cb18-16"><a href="example-uses.html#cb18-16" tabindex="-1"></a><span class="co">#&gt;           HEROP_ID         GEOID TotPop TotVetPop TotUnits WhiteP BlackP AmIndP</span></span>
<span id="cb18-17"><a href="example-uses.html#cb18-17" tabindex="-1"></a><span class="co">#&gt; 1 140US17031010100 8.414437e-314   4854       139     2618  37.29  50.21   0.68</span></span>
<span id="cb18-18"><a href="example-uses.html#cb18-18" tabindex="-1"></a><span class="co">#&gt; 2 140US17031010201 8.414437e-314   6450        93     3032  35.84  36.43   0.74</span></span>
<span id="cb18-19"><a href="example-uses.html#cb18-19" tabindex="-1"></a><span class="co">#&gt; 3 140US17031010202 8.414437e-314   2818       189     1271  43.90  33.82   0.64</span></span>
<span id="cb18-20"><a href="example-uses.html#cb18-20" tabindex="-1"></a><span class="co">#&gt; 4 140US17031010300 8.414437e-314   6236       141     3270  52.39  27.61   0.34</span></span>
<span id="cb18-21"><a href="example-uses.html#cb18-21" tabindex="-1"></a><span class="co">#&gt; 5 140US17031010400 8.414437e-314   5042       101     2347  66.26  14.46   0.34</span></span>
<span id="cb18-22"><a href="example-uses.html#cb18-22" tabindex="-1"></a><span class="co">#&gt; 6 140US17031010501 8.414437e-314   4091       178     2551  49.33  31.78   0.56</span></span>
<span id="cb18-23"><a href="example-uses.html#cb18-23" tabindex="-1"></a><span class="co">#&gt;   AsianP PacIsP OtherP HispP Age15_24P Und45P Ovr65P Age0_4 Age5_14 Age15_19</span></span>
<span id="cb18-24"><a href="example-uses.html#cb18-24" tabindex="-1"></a><span class="co">#&gt; 1   3.09   0.02   8.71  8.67     13.04  67.02   5.71    355     542      275</span></span>
<span id="cb18-25"><a href="example-uses.html#cb18-25" tabindex="-1"></a><span class="co">#&gt; 2   4.64   0.09  22.25 20.05     13.46  72.53   4.87    563     896      396</span></span>
<span id="cb18-26"><a href="example-uses.html#cb18-26" tabindex="-1"></a><span class="co">#&gt; 3   5.07   0.04  16.54 18.31     12.63  63.48  10.97    208     290      172</span></span>
<span id="cb18-27"><a href="example-uses.html#cb18-27" tabindex="-1"></a><span class="co">#&gt; 4   5.55   0.26  13.86 13.15     10.26  59.12  14.18    360     448      237</span></span>
<span id="cb18-28"><a href="example-uses.html#cb18-28" tabindex="-1"></a><span class="co">#&gt; 5  11.15   0.10   7.70  8.51     41.63  76.10   5.22    160     200      955</span></span>
<span id="cb18-29"><a href="example-uses.html#cb18-29" tabindex="-1"></a><span class="co">#&gt; 6   9.36   0.12   8.85 10.22     13.84  69.52   9.58    223     264      138</span></span>
<span id="cb18-30"><a href="example-uses.html#cb18-30" tabindex="-1"></a><span class="co">#&gt;   Age20_24 Age15_44 Age45_49 Age50_54 Age55_59 Age60_64 AgeOv65 Age18_64 DisbP</span></span>
<span id="cb18-31"><a href="example-uses.html#cb18-31" tabindex="-1"></a><span class="co">#&gt; 1      358     2356      413      376      306      229     277     3519  11.2</span></span>
<span id="cb18-32"><a href="example-uses.html#cb18-32" tabindex="-1"></a><span class="co">#&gt; 2      472     3219      475      439      310      234     314     4432   9.3</span></span>
<span id="cb18-33"><a href="example-uses.html#cb18-33" tabindex="-1"></a><span class="co">#&gt; 3      184     1291      196      213      157      154     309     1886  17.1</span></span>
<span id="cb18-34"><a href="example-uses.html#cb18-34" tabindex="-1"></a><span class="co">#&gt; 4      403     2879      475      414      419      357     884     4401   9.0</span></span>
<span id="cb18-35"><a href="example-uses.html#cb18-35" tabindex="-1"></a><span class="co">#&gt; 5     1144     3477      259      280      237      166     263     4360   7.5</span></span>
<span id="cb18-36"><a href="example-uses.html#cb18-36" tabindex="-1"></a><span class="co">#&gt; 6      428     2357      289      244      178      144     392     3137  12.0</span></span>
<span id="cb18-37"><a href="example-uses.html#cb18-37" tabindex="-1"></a><span class="co">#&gt;   NoHsP VetP UnempP  PovP MedInc  PciE GiniCoeff                       geometry</span></span>
<span id="cb18-38"><a href="example-uses.html#cb18-38" tabindex="-1"></a><span class="co">#&gt; 1 12.61 3.73  10.07 31.95  24451 20524    0.4926 MULTIPOLYGON (((-87.66507 4...</span></span>
<span id="cb18-39"><a href="example-uses.html#cb18-39" tabindex="-1"></a><span class="co">#&gt; 2 17.56 1.85   8.70 34.51  23267 20964    0.4476 MULTIPOLYGON (((-87.68281 4...</span></span>
<span id="cb18-40"><a href="example-uses.html#cb18-40" tabindex="-1"></a><span class="co">#&gt; 3 16.99 8.92  12.32 26.69  18660 23806    0.4639 MULTIPOLYGON (((-87.67464 4...</span></span>
<span id="cb18-41"><a href="example-uses.html#cb18-41" tabindex="-1"></a><span class="co">#&gt; 4 21.16 2.81   8.24 22.41  23303 25834    0.4632 MULTIPOLYGON (((-87.66383 4...</span></span>
<span id="cb18-42"><a href="example-uses.html#cb18-42" tabindex="-1"></a><span class="co">#&gt; 5  7.66 2.40  10.75 21.00  20054 27273    0.5042 MULTIPOLYGON (((-87.66156 4...</span></span>
<span id="cb18-43"><a href="example-uses.html#cb18-43" tabindex="-1"></a><span class="co">#&gt; 6  8.54 5.14   5.98 22.70  26830 26150    0.4592 MULTIPOLYGON (((-87.6613 42...</span></span></code></pre></div>
<p>We can then immediately map our data. We opt to use <code>tmap</code> in this example, but <code>ggplot2</code> also has mapping functionality for users more familiar with the library.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="example-uses.html#cb19-1" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb19-2"><a href="example-uses.html#cb19-2" tabindex="-1"></a></span>
<span id="cb19-3"><a href="example-uses.html#cb19-3" tabindex="-1"></a><span class="fu">tm_shape</span>(cook_county_2010) <span class="sc">+</span> </span>
<span id="cb19-4"><a href="example-uses.html#cb19-4" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="fu">c</span>(<span class="st">&#39;Age18_64&#39;</span>, <span class="st">&#39;PovP&#39;</span>), </span>
<span id="cb19-5"><a href="example-uses.html#cb19-5" tabindex="-1"></a>          <span class="at">title =</span> <span class="fu">c</span>(<span class="st">&#39;Working Age&#39;</span>, <span class="st">&#39;Poverty</span><span class="sc">\n</span><span class="st">Percentage&#39;</span>),</span>
<span id="cb19-6"><a href="example-uses.html#cb19-6" tabindex="-1"></a>          <span class="at">style =</span> <span class="fu">c</span>(<span class="st">&#39;sd&#39;</span>, <span class="st">&#39;sd&#39;</span>),</span>
<span id="cb19-7"><a href="example-uses.html#cb19-7" tabindex="-1"></a>          <span class="at">palette =</span> <span class="st">&#39;BrBG&#39;</span>) <span class="sc">+</span> </span>
<span id="cb19-8"><a href="example-uses.html#cb19-8" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">&#39;left&#39;</span>, <span class="st">&#39;bottom&#39;</span>), <span class="at">frame=</span><span class="cn">FALSE</span>, <span class="at">main.title =</span> <span class="st">&#39;Fewer workers correlates with higher poverty in Cook&#39;</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>Based on the above, we observe that fewer working age individuals correlates roughly with higher poverty rates within the southern and western sides of Chicago, with this trend breaking down in northern suburbs.</p>
<p>Chicagoland continues a little bit into northeastern Indiana; maybe the rough correlation is present there as well? To check, we can pass a list of county <a href="https://www.census.gov/programs-surveys/geography/guidance/geo-identifiers.html">GEOIDS</a> to the <code>counties</code> parameter of <code>load_oeps</code>. Note that these GEOIDS <em>must</em> consist of the state FIPS and county FIPS, as they would otherwise fail to uniquely identify our two counties.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="example-uses.html#cb20-1" tabindex="-1"></a><span class="co"># Grab the data</span></span>
<span id="cb20-2"><a href="example-uses.html#cb20-2" tabindex="-1"></a>chicago_metro_2010 <span class="ot">&lt;-</span> <span class="fu">load_oeps</span>(</span>
<span id="cb20-3"><a href="example-uses.html#cb20-3" tabindex="-1"></a>  <span class="at">scale=</span><span class="st">&#39;tract&#39;</span>, </span>
<span id="cb20-4"><a href="example-uses.html#cb20-4" tabindex="-1"></a>  <span class="at">year=</span><span class="st">&#39;2010&#39;</span>, </span>
<span id="cb20-5"><a href="example-uses.html#cb20-5" tabindex="-1"></a>  <span class="at">theme=</span><span class="fu">c</span>(<span class="st">&#39;social&#39;</span>, <span class="st">&#39;economic&#39;</span>), </span>
<span id="cb20-6"><a href="example-uses.html#cb20-6" tabindex="-1"></a>  <span class="at">counties=</span><span class="fu">c</span>(<span class="st">&#39;17031&#39;</span>, <span class="st">&#39;18089&#39;</span>),</span>
<span id="cb20-7"><a href="example-uses.html#cb20-7" tabindex="-1"></a>  <span class="at">geometry=</span>T)</span>
<span id="cb20-8"><a href="example-uses.html#cb20-8" tabindex="-1"></a></span>
<span id="cb20-9"><a href="example-uses.html#cb20-9" tabindex="-1"></a><span class="co"># Preview what we got</span></span>
<span id="cb20-10"><a href="example-uses.html#cb20-10" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">data.frame</span>(cook_county_2010))</span>
<span id="cb20-11"><a href="example-uses.html#cb20-11" tabindex="-1"></a><span class="co">#&gt;           HEROP_ID         GEOID TotPop TotVetPop TotUnits WhiteP BlackP AmIndP</span></span>
<span id="cb20-12"><a href="example-uses.html#cb20-12" tabindex="-1"></a><span class="co">#&gt; 1 140US17031010100 8.414437e-314   4854       139     2618  37.29  50.21   0.68</span></span>
<span id="cb20-13"><a href="example-uses.html#cb20-13" tabindex="-1"></a><span class="co">#&gt; 2 140US17031010201 8.414437e-314   6450        93     3032  35.84  36.43   0.74</span></span>
<span id="cb20-14"><a href="example-uses.html#cb20-14" tabindex="-1"></a><span class="co">#&gt; 3 140US17031010202 8.414437e-314   2818       189     1271  43.90  33.82   0.64</span></span>
<span id="cb20-15"><a href="example-uses.html#cb20-15" tabindex="-1"></a><span class="co">#&gt; 4 140US17031010300 8.414437e-314   6236       141     3270  52.39  27.61   0.34</span></span>
<span id="cb20-16"><a href="example-uses.html#cb20-16" tabindex="-1"></a><span class="co">#&gt; 5 140US17031010400 8.414437e-314   5042       101     2347  66.26  14.46   0.34</span></span>
<span id="cb20-17"><a href="example-uses.html#cb20-17" tabindex="-1"></a><span class="co">#&gt; 6 140US17031010501 8.414437e-314   4091       178     2551  49.33  31.78   0.56</span></span>
<span id="cb20-18"><a href="example-uses.html#cb20-18" tabindex="-1"></a><span class="co">#&gt;   AsianP PacIsP OtherP HispP Age15_24P Und45P Ovr65P Age0_4 Age5_14 Age15_19</span></span>
<span id="cb20-19"><a href="example-uses.html#cb20-19" tabindex="-1"></a><span class="co">#&gt; 1   3.09   0.02   8.71  8.67     13.04  67.02   5.71    355     542      275</span></span>
<span id="cb20-20"><a href="example-uses.html#cb20-20" tabindex="-1"></a><span class="co">#&gt; 2   4.64   0.09  22.25 20.05     13.46  72.53   4.87    563     896      396</span></span>
<span id="cb20-21"><a href="example-uses.html#cb20-21" tabindex="-1"></a><span class="co">#&gt; 3   5.07   0.04  16.54 18.31     12.63  63.48  10.97    208     290      172</span></span>
<span id="cb20-22"><a href="example-uses.html#cb20-22" tabindex="-1"></a><span class="co">#&gt; 4   5.55   0.26  13.86 13.15     10.26  59.12  14.18    360     448      237</span></span>
<span id="cb20-23"><a href="example-uses.html#cb20-23" tabindex="-1"></a><span class="co">#&gt; 5  11.15   0.10   7.70  8.51     41.63  76.10   5.22    160     200      955</span></span>
<span id="cb20-24"><a href="example-uses.html#cb20-24" tabindex="-1"></a><span class="co">#&gt; 6   9.36   0.12   8.85 10.22     13.84  69.52   9.58    223     264      138</span></span>
<span id="cb20-25"><a href="example-uses.html#cb20-25" tabindex="-1"></a><span class="co">#&gt;   Age20_24 Age15_44 Age45_49 Age50_54 Age55_59 Age60_64 AgeOv65 Age18_64 DisbP</span></span>
<span id="cb20-26"><a href="example-uses.html#cb20-26" tabindex="-1"></a><span class="co">#&gt; 1      358     2356      413      376      306      229     277     3519  11.2</span></span>
<span id="cb20-27"><a href="example-uses.html#cb20-27" tabindex="-1"></a><span class="co">#&gt; 2      472     3219      475      439      310      234     314     4432   9.3</span></span>
<span id="cb20-28"><a href="example-uses.html#cb20-28" tabindex="-1"></a><span class="co">#&gt; 3      184     1291      196      213      157      154     309     1886  17.1</span></span>
<span id="cb20-29"><a href="example-uses.html#cb20-29" tabindex="-1"></a><span class="co">#&gt; 4      403     2879      475      414      419      357     884     4401   9.0</span></span>
<span id="cb20-30"><a href="example-uses.html#cb20-30" tabindex="-1"></a><span class="co">#&gt; 5     1144     3477      259      280      237      166     263     4360   7.5</span></span>
<span id="cb20-31"><a href="example-uses.html#cb20-31" tabindex="-1"></a><span class="co">#&gt; 6      428     2357      289      244      178      144     392     3137  12.0</span></span>
<span id="cb20-32"><a href="example-uses.html#cb20-32" tabindex="-1"></a><span class="co">#&gt;   NoHsP VetP UnempP  PovP MedInc  PciE GiniCoeff                       geometry</span></span>
<span id="cb20-33"><a href="example-uses.html#cb20-33" tabindex="-1"></a><span class="co">#&gt; 1 12.61 3.73  10.07 31.95  24451 20524    0.4926 MULTIPOLYGON (((-87.66507 4...</span></span>
<span id="cb20-34"><a href="example-uses.html#cb20-34" tabindex="-1"></a><span class="co">#&gt; 2 17.56 1.85   8.70 34.51  23267 20964    0.4476 MULTIPOLYGON (((-87.68281 4...</span></span>
<span id="cb20-35"><a href="example-uses.html#cb20-35" tabindex="-1"></a><span class="co">#&gt; 3 16.99 8.92  12.32 26.69  18660 23806    0.4639 MULTIPOLYGON (((-87.67464 4...</span></span>
<span id="cb20-36"><a href="example-uses.html#cb20-36" tabindex="-1"></a><span class="co">#&gt; 4 21.16 2.81   8.24 22.41  23303 25834    0.4632 MULTIPOLYGON (((-87.66383 4...</span></span>
<span id="cb20-37"><a href="example-uses.html#cb20-37" tabindex="-1"></a><span class="co">#&gt; 5  7.66 2.40  10.75 21.00  20054 27273    0.5042 MULTIPOLYGON (((-87.66156 4...</span></span>
<span id="cb20-38"><a href="example-uses.html#cb20-38" tabindex="-1"></a><span class="co">#&gt; 6  8.54 5.14   5.98 22.70  26830 26150    0.4592 MULTIPOLYGON (((-87.6613 42...</span></span></code></pre></div>
<p>We can once again map the resultant data, and find that the rough correlation between lower working age population totals and higher poverty in more densely populated, coastal areas seems to hold for the broader Chicagoland area.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="example-uses.html#cb21-1" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb21-2"><a href="example-uses.html#cb21-2" tabindex="-1"></a><span class="fu">tm_shape</span>(chicago_metro_2010) <span class="sc">+</span> </span>
<span id="cb21-3"><a href="example-uses.html#cb21-3" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="fu">c</span>(<span class="st">&#39;Age18_64&#39;</span>, <span class="st">&#39;PovP&#39;</span>), </span>
<span id="cb21-4"><a href="example-uses.html#cb21-4" tabindex="-1"></a>          <span class="at">title =</span> <span class="fu">c</span>(<span class="st">&#39;Working Age&#39;</span>, <span class="st">&#39;Poverty</span><span class="sc">\n</span><span class="st">Percentage&#39;</span>),</span>
<span id="cb21-5"><a href="example-uses.html#cb21-5" tabindex="-1"></a>          <span class="at">style =</span> <span class="fu">c</span>(<span class="st">&#39;sd&#39;</span>, <span class="st">&#39;sd&#39;</span>),</span>
<span id="cb21-6"><a href="example-uses.html#cb21-6" tabindex="-1"></a>          <span class="at">palette =</span> <span class="st">&#39;BrBG&#39;</span>) <span class="sc">+</span> </span>
<span id="cb21-7"><a href="example-uses.html#cb21-7" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">&#39;left&#39;</span>, <span class="st">&#39;bottom&#39;</span>), <span class="at">frame=</span><span class="cn">FALSE</span>, <span class="at">main.title =</span> <span class="st">&#39;Fewer workers correlates with higher poverty near Chi&#39;</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="longitudinal-analysis" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Longitudinal analysis<a href="example-uses.html#longitudinal-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="basic-usage.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="getting-oeps-data-from-bigquery.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/03-larger-examples.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
